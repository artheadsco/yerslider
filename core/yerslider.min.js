/*
 * yerSlider
 * A javascript object for slided content
 *
 * Copyright (c) 2013 Johann Heyne
 *
 * Version 1
 * Update 2013-05-17
 *
 * Minimum requirements: jQuery v1.6+
 *
 * Terms of use:
 * yerslider is licensed under the MIT License.
 *
 */var yerSlider={param:{slidegap:0,slidegroupresp:{},slidegroup:1,sliderid:".yerslider",sliderwrapclass:".yerslider-wrap",slidermaskclass:".yerslider-mask",sliderclass:".yerslider-slider",slideclass:".yerslider-slide",bulletswrapclass:".yerslider-bullets-wrap",bulletclass:".yerslider-bullet",bulletcurrentclass:".yerslider-bullet-current",bulletclickable:!0,nextbtn:!0,prevbtn:!0,nextclass:".yerslider-next",prevclass:".yerslider-prev",nextinactiveclass:".yerslider-next-inactive",previnactiveclass:".yerslider-prev-inactive",animationspeed:1e3,bullets:!1,loop:"none",swipe:!1,youtubeparam:"?rel=1&autoplay=0&showinfo=0",youtubeurl:"http://www.youtube.com/embed/{code}{param}",youtubehtml:'<iframe width="{width}" height="{height}" src="{url}" frameborder="no"></iframe>',vimeoparam:"?byline=0&amp;portrait=0&amp;autoplay=1",vimeourl:"http://player.vimeo.com/video/{code}{param}",vimeohtml:'<iframe width="{width}" height="{height}" src="{url}" frameborder="no" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'},stat:{slidegroupmax:1,currentslideindex:0,slidecount:0,slidermaskwidth:0,slidewidth:0,isanimating:!1,nextbtnclickable:!1,prevbtnclickable:!1,bulletscount:0,bulletscountcache:0,bulletcurrent:0,bulletschanged:!1,slidingleft:!1,slidingright:!1,resizing:!1,cssanimation:!1,isevent:!1,touch:!1,clicktype:"click",isios:!1,isresizing:!1},obj:{sliderid:undefined,sliderwrap:undefined,slider:undefined,slide:undefined,bulletswrap:undefined,bullets:undefined,prevbtn:undefined,nextbtn:undefined},init:function(e){this.init_getdefaultparam(e);this.init_animation();this.init_touch();this.init_isios();this.init_ojects();this.init_css();this.set_slidermaskwidth();this.set_slidecount();this.set_slidegroup();this.set_slidegroupmax();this.clon_slides();this.set_slidewidth();this.set_slideheight();this.set_prevnext();this.bullets();this.init_touchswipe();this.init_iosresizeclickbug();this.init_video()},init_getdefaultparam:function(e){this.param=this.helper.setDefaultParam({p:e,d:this.param})},init_animation:function(){jQuery("html").hasClass("csstransforms3d csstransitions")&&(this.stat.cssanimation=!0)},init_touch:function(){if(jQuery("html").hasClass("touch")){this.stat.touch=!0;this.stat.clicktype="touchend"}},init_isios:function(){navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&(this.stat.isios=!0)},init_ojects:function(){this.obj.sliderid=jQuery(this.param.sliderid);this.obj.sliderwrap=jQuery(this.param.sliderwrapclass);this.obj.slidermask=jQuery(this.param.slidermaskclass);this.obj.slider=jQuery(this.param.sliderclass);this.obj.slide=jQuery(this.param.slideclass)},init_css:function(){this.obj.sliderwrap.css({position:"relative",width:"100%"});this.obj.slidermask.css({position:"relative",width:"100%",overflow:"hidden"});var e=[];e.fontsize=this.obj.slide.css("font-size");e.lineheight=this.obj.slide.css("line-height");this.obj.slider.css({"white-space":"nowrap",position:"relative","list-style-type":"none",padding:0,margin:0,"line-height":0,"font-size":0});this.obj.slide.css({display:"inline-block","vertical-align":"top","white-space":"normal","font-size":e.fontsize,"line-height":e.lineheight})},init_touchswipe:function(){this.param.swipe&&this.touch_swipe()},init_iosresizeclickbug:function(){this.obj.sliderwrap.on(this.stat.clicktype,function(){yerSlider.stat.isevent=!0;window.setTimeout(function(){yerSlider.stat.isevent=!1},200)});jQuery(window).bind("resize",function(){window.setTimeout(function(){!yerSlider.stat.isresizing&&!yerSlider.stat.isevent&&yerSlider.resize()},100)})},init_video:function(){window.setTimeout(function(){jQuery(".yerslider-video *").remove()},111);this.videos_in_viewport()},set_slidermaskwidth:function(){if(this.param.insidetablecellfix){this.obj.slider.hide();this.obj.slidermask.css("width","100%")}this.stat.slidermaskwidth=this.obj.slidermask.innerWidth();if(this.param.insidetablecellfix){this.obj.slidermask.css("width",this.obj.slidermask.width()+"px");this.obj.slider.show()}},set_slidecount:function(){this.stat.slidecount=this.obj.slide.size()},set_slidegroup:function(){var e=this.obj.slidermask.innerWidth(),t=this.param.slidegroup;if(this.helper.getLength(this.param.slidegroupresp)>0)for(var n in this.param.slidegroupresp)n<=this.stat.slidermaskwidth&&(t=this.param.slidegroupresp[n]);if(t>=this.stat.slidecount){t=this.stat.slidecount;this.stat.currentslideindex=0;this.move_slider_to_current_index()}this.param.slidegroup=t},set_slidegroupmax:function(){for(var e in this.param.slidegroupresp)this.stat.slidegroupmax<this.param.slidegroupresp[e]&&(this.stat.slidegroupmax=this.param.slidegroupresp[e])},set_slidewidth:function(){this.stat.slidewidth=Math.floor((this.stat.slidermaskwidth-this.param.slidegap*(this.param.slidegroup-1))/this.param.slidegroup);var e=this.stat.slidermaskwidth-(this.stat.slidewidth*this.param.slidegroup+this.param.slidegap*(this.param.slidegroup-1));this.obj.slide.width(this.stat.slidewidth).css("margin-right",this.param.slidegap+"px").last().css("margin-right","0");if(e>0)for(var t=0;t<e;t++)jQuery(this.param.slideclass+":nth-child("+(1+t)+"n-"+(this.param.slidegroup-1)+")").css("margin-right",this.param.slidegap+1+"px")},set_slideheight:function(){window.setTimeout(function(){yerSlider.obj.slide.height("auto");var e=yerSlider.obj.slider.height();yerSlider.obj.slide.height(e)},0)},set_prevnext:function(){if(this.stat.slidecount>this.param.slidegroup){if(typeof this.obj.nextbtn!="object"&&this.param.nextbtn){this.obj.sliderwrap.append('<div class="js-yerslider-next yerslider-prevnext '+this.param.nextclass.replace(".","")+'">');this.obj.nextbtn=jQuery(this.param.nextclass)}if(typeof this.obj.prevbtn!="object"&&this.param.prevbtn){this.obj.sliderwrap.append('<div class="js-yerslider-prev yerslider-prevnext '+this.param.prevclass.replace(".","")+'">');this.obj.prevbtn=jQuery(this.param.prevclass)}this.refresh_prevnext()}else{if(typeof this.obj.nextbtn=="object"){this.obj.nextbtn.remove();this.obj.nextbtn=undefined;this.stat.nextbtnclickable=!1}if(typeof this.obj.prevbtn=="object"){this.obj.prevbtn.remove();this.obj.prevbtn=undefined;this.stat.prevbtnclickable=!1}}},next_slide:function(){this.stat.currentslideindex=this.stat.currentslideindex+this.param.slidegroup;this.param.loop==="none"&&this.stat.currentslideindex>=this.stat.slidecount-this.param.slidegroup&&(this.stat.currentslideindex=this.stat.slidecount-this.param.slidegroup);if(this.param.loop==="appending"&&this.stat.currentslideindex>this.stat.slidecount-1+this.param.slidegroup){var e=this.stat.currentslideindex-this.stat.slidecount;this.stat.currentslideindex=this.stat.currentslideindex-this.stat.slidecount-this.param.slidegroup;this.animate_slider_to_current_position(0);this.stat.currentslideindex=e}this.obj.slide.removeClass("current");jQuery(this.obj.slide[this.stat.currentslideindex]).addClass("current")},prev_slide:function(){this.stat.currentslideindex=this.stat.currentslideindex-this.param.slidegroup;this.param.loop==="none"&&this.stat.currentslideindex<=0&&(this.stat.currentslideindex=0);if(this.param.loop==="appending"&&this.stat.currentslideindex<0){var e=this.stat.slidecount+this.stat.currentslideindex;this.stat.currentslideindex=this.stat.currentslideindex+this.stat.slidecount+this.param.slidegroup;this.animate_slider_to_current_position(0);this.stat.currentslideindex=e}this.obj.slide.removeClass("current");jQuery(this.obj.slide[this.stat.currentslideindex]).addClass("current")},nextbtn_click:function(){if(!yerSlider.stat.nextbtnclickable){this.obj.nextbtn.on(this.stat.clicktype,function(){if(!yerSlider.stat.isanimating){yerSlider.stat.isanimating=!0;yerSlider.stat.slidingright=!0;yerSlider.next_slide();yerSlider.animate_slider_to_current_position(yerSlider.param.animationspeed);yerSlider.refresh_prevnext();if(yerSlider.param.bullets){yerSlider.set_bullet_current();yerSlider.set_bullet_current_class()}yerSlider.stat.slidingright=!1}});yerSlider.stat.nextbtnclickable=!0}},prevbtn_click:function(){if(!yerSlider.stat.prevbtnclickable){this.obj.prevbtn.on(this.stat.clicktype,function(){if(!yerSlider.stat.isanimating){yerSlider.stat.isanimating=!0;yerSlider.stat.slidingleft=!0;yerSlider.prev_slide();yerSlider.animate_slider_to_current_position(yerSlider.param.animationspeed);yerSlider.refresh_prevnext();if(yerSlider.param.bullets){yerSlider.set_bullet_current();yerSlider.set_bullet_current_class()}yerSlider.stat.slidingleft=!1}});yerSlider.stat.prevbtnclickable=!0}},nextbtn_click_unbind:function(){this.obj.nextbtn.unbind("click").addClass(this.param.nextinactiveclass.replace(".",""));this.stat.nextbtnclickable=!1},prevbtn_click_unbind:function(){this.obj.prevbtn.unbind("click").addClass(this.param.previnactiveclass.replace(".",""));this.stat.prevbtnclickable=!1},refresh_prevnext:function(){this.stat.nextbtnclickable||this.nextbtn_click();this.stat.prevbtnclickable||this.prevbtn_click();this.obj.nextbtn.removeClass(this.param.nextinactiveclass.replace(".",""));this.obj.prevbtn.removeClass(this.param.previnactiveclass.replace(".",""));if(this.param.loop==="none"){this.stat.currentslideindex>=this.stat.slidecount-this.param.slidegroup&&this.nextbtn_click_unbind();this.stat.currentslideindex<=0&&this.prevbtn_click_unbind()}},bullets:function(){if(this.param.bullets){if(typeof this.obj.bulletswrap!="object"){this.obj.sliderwrap.append('<div class="'+this.param.bulletswrapclass.replace(".","")+'"></div>');this.obj.bulletswrap=this.obj.sliderwrap.find(this.param.bulletswrapclass)}this.stat.bulletscount=Math.ceil(this.stat.slidecount/this.param.slidegroup);this.set_bullet_current();this.bullet_items();this.set_bullet_current_class();this.bullet_click()}},bullet_items:function(){if(this.stat.bulletscountcache!==this.stat.bulletscount){var e="";for(var t=1;t<=this.stat.bulletscount;t++)e+='<div class="'+this.param.bulletclass.replace(".","")+'" data-index="'+t+'"></div>';this.obj.bulletswrap.empty();this.stat.bulletscount>1&&this.obj.bulletswrap.append(e);this.stat.bulletscountcache=this.stat.bulletscount}this.obj.bullets=this.obj.bulletswrap.find(this.param.bulletclass);this.set_bullet_current_class()},set_bullet_current:function(){var e=this.stat.currentslideindex;e+1>this.stat.slidecount&&(e-=this.stat.slidecount);if(this.param.loop==="none")this.stat.bulletcurrent=Math.ceil(e/this.param.slidegroup)+1;else{this.stat.bulletcurrent=Math.round(e/this.param.slidegroup)+1;this.stat.bulletcurrent>this.stat.bulletscount&&(this.stat.bulletcurrent=this.stat.bulletscount)}},set_bullet_current_class:function(){this.obj.bullets.removeClass(this.param.bulletcurrentclass.replace(".",""));this.obj.bulletswrap.find('[data-index="'+this.stat.bulletcurrent+'"]').addClass(this.param.bulletcurrentclass.replace(".",""))},bullet_click:function(){this.obj.bullets.on("click",function(){if(!yerSlider.stat.isanimating){yerSlider.stat.isanimating=!0;var e=jQuery(this).data("index");yerSlider.stat.currentslideindex=(e-1)*yerSlider.param.slidegroup;yerSlider.proof_slider_current_index();yerSlider.animate_slider_to_current_position(yerSlider.param.animationspeed);yerSlider.stat.prevbtnclickable||yerSlider.prevbtn_click()}if(yerSlider.param.bullets){yerSlider.set_bullet_current();yerSlider.set_bullet_current_class()}yerSlider.refresh_prevnext()})},move_slider_to_current_index:function(){yerSlider.obj.slider.css({"margin-left":"-"+yerSlider.get_sliderposition()+"px"})},animate_slider_to_current_position:function(e){this.stat.cssanimation?yerSlider.animate_slider_to_current_position_css(e):yerSlider.animate_slider_to_current_position_js(e)},animate_slider_to_current_position_js:function(e){yerSlider.obj.slider.animate({"margin-left":"-"+yerSlider.get_sliderposition()+"px"},e,function(){yerSlider.stat.isanimating=!1})},animate_slider_to_current_position_css:function(e){var t=yerSlider.get_sliderposition()*-1,n="translate3d("+t.toString()+"px,0px,0px)";yerSlider.css_transitionduration(yerSlider.obj.slider,e);yerSlider.obj.slider.css({"-webkit-transform":n,"-ms-transform":n,"-o-transform":n,"-moz-transform":n,transform:n});window.setTimeout(function(){yerSlider.stat.isanimating=!1;yerSlider.animation_finshed();yerSlider.videos_in_viewport()},yerSlider.param.animationspeed)},animation_finshed:function(){},videos_in_viewport:function(){jQuery(".yerslider-video *").addClass("remove-me");window.setTimeout(function(){jQuery(".remove-me").remove()},yerSlider.param.animationspeed);window.setTimeout(function(){var e=!1;for(i=yerSlider.stat.currentslideindex+1;i<=yerSlider.stat.currentslideindex+yerSlider.param.slidegroup;i++){e=jQuery(yerSlider.param.slideclass+":nth-child("+i+") .yerslider-video");if(e.length>0){var t=e.data("video-type"),n=e.data("video-code"),r=e.data("video-width"),s=e.data("video-height");param="";if(t==="youtube"){yerSlider.stat.isios||(param=yerSlider.param.youtubeparam);url=yerSlider.param.youtubeurl;html=yerSlider.param.youtubehtml;url=url.replace("{code}",n).replace("{param}",param);html=html.replace("{width}",r).replace("{height}",s).replace("{url}",url);e.append(html)}if(t==="vimeo"){yerSlider.stat.isios||(param=yerSlider.param.vimeoparam);url=yerSlider.param.vimeourl;html=yerSlider.param.vimeohtml;url=url.replace("{code}",n).replace("{param}",param);html=html.replace("{width}",r).replace("{height}",s).replace("{url}",url);e.append(html)}window.setTimeout(function(){},111)}}},0)},clon_slides:function(){var e=0;for(var t=0;t<this.stat.slidegroupmax*2;t++){e>this.stat.slidecount&&(e=0);this.obj.slider.append(jQuery(this.obj.slide[e]).clone());e++}this.obj.slide=jQuery(this.param.slideclass)},get_sliderposition:function(){var e=jQuery(this.obj.slide[yerSlider.stat.currentslideindex]).position().left;return e},proof_slider_current_index:function(){if(this.stat.slidecount-this.param.slidegroup>0&&this.stat.currentslideindex>=this.stat.slidecount-this.param.slidegroup){this.stat.currentslideindex=this.stat.slidecount-this.param.slidegroup;this.nextbtn_click_unbind()}},resize:function(){yerSlider.stat.resizing=!0;if(yerSlider.stat.isios){yerSlider.stat.isresizing=!0;yerSlider.obj.slider.fadeOut()}yerSlider.set_slidermaskwidth();yerSlider.set_slidegroup();yerSlider.set_slidewidth();yerSlider.set_slideheight();yerSlider.proof_slider_current_index();yerSlider.animate_slider_to_current_position(0);yerSlider.set_prevnext();yerSlider.param.bullets&&yerSlider.bullets();yerSlider.stat.resizing=!1;yerSlider.stat.isios&&yerSlider.obj.slider.fadeIn("fast",function(){yerSlider.stat.isresizing=!1})},touch_swipe:function(){function o(e,r,s,o,l){if(r!=="move"||s!=="left"&&s!=="right")r==="cancel"?f(t*n,i):r==="end"&&(s=="right"?u():s==="left"&&a());else{var c=0;s==="left"?f(t*n+o,c):s==="right"&&f(t*n-o,c)}}function u(){n=Math.max(n-1,0);f(t*n,i);yerSlider.prev_slide();yerSlider.refresh_prevnext();if(yerSlider.param.bullets){yerSlider.set_bullet_current();yerSlider.set_bullet_current_class()}}function a(){n=Math.min(n+1,r-1);f(t*n,i);yerSlider.next_slide();yerSlider.refresh_prevnext();if(yerSlider.param.bullets){yerSlider.set_bullet_current();yerSlider.set_bullet_current_class()}}function f(e,t){s.css("-webkit-transition-duration",(t/1e3).toFixed(1)+"s");var n=(e<0?"":"-")+Math.abs(e).toString();s.css("-webkit-transform","translate3d("+n+"px,0px,0px)")}var e=(this.stat.slidewidth+this.param.slidegap)*this.param.slidegroup,t=e,n=0,r=Math.ceil(this.stat.slidecount/this.param.slidegroup),i=this.param.animationspeed,s=this.obj.slide;s.swipe({triggerOnTouchEnd:!0,swipeStatus:o,allowPageScroll:"vertical"})},css_transitionduration:function(e,t){t=(t/1e3).toFixed(1)+"s";e.css({"-webkit-transition-duration":t,"-ms-transition-duration":t,"-o-transition-duration":t,"-moz-transition-duration":t,"transition-duration":t})},helper:{getLength:function(e){var t=e.length?--e.length:-1;for(var n in e)t++;return t},setDefaultParam:function(e){typeof e=="undefined"&&(e={});typeof e.p=="undefined"&&(e.p={});typeof e.d=="undefined"&&(e.d={});var t=e.p;for(var n in e.d)typeof e.d[n]!="undefined"&&typeof t[n]!=typeof e.d[n]?t[n]=e.d[n]:typeof e.d[n]!="undefined"&&yerSlider.helper.getLength(t[n])!==yerSlider.helper.getLength(e.d[n])&&(t[n]=yerSlider.helper.setDefaultParam({p:t[n],d:e.d[n]}));return t}}};